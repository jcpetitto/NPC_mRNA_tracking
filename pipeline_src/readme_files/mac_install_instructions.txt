# Mac install instructions

# install cmake

use homebrew to install cmake

# dn include cuda version of pytorch
```
cat << EOF > environment.yml
    channels:
    - pytorch
    - nvidia  # <-- Make sure this is here
    - conda-forge
    - https://repo.anaconda.com/pkgs/main
    - https://repo.anaconda.com/pkgs/r
    dependencies:
    # --- Core Python & CUDA ---
    - python=3.10
    - pytorch=2.5.1
    - torchvision=0.20.1
    
    # --- Core Dependencies for Theseus & User Code ---
    - suitesparse=7.10.1
    - scikit-image
    - scikit-sparse
    - matplotlib
    - pandas
    - numpy
    - scipy
    - tifffile
    - tqdm
    - pyyaml
    - lxml
    - pillow
    - jupyter

    # --- Pip Packages ---
    - pip:
        - aiohappyeyeballs==2.6.1
        - aiohttp==3.13.0
        - aiosignal==1.4.0
        - attrs==25.4.0
        - frozenlist==1.8.0
        - hf-xet==1.1.10
        - huggingface-hub==0.35.3
        - iniconfig==2.1.0
        - lightning-utilities==0.15.2
        - multidict==6.7.0
        - pluggy==1.6.0
        - propcache==0.3.2
        - pygments==2.19.2
        - pytest==8.4.2
        - pytorch-lightning==2.5.5
        - safetensors==0.6.2
        - segmentation-models-pytorch==0.5.0
        - semantic-version==2.10.0
        - timm==1.0.20
        - torchkin==0.1.1
        - torchlie==0.1.0
        - torchmetrics==1.8.2
        - urdf-parser-py==0.0.4
        - yarl==1.22.0
EOF

conda env create -f environment.yml -n yeast_theseus -y

conda activate yeast_theseus
```
# make sure cmake and openblas are available in the environment
conda install -c conda-forge cmake openblas
conda install -c conda-forge llvm-tools
conda install -c conda-forge gtest

git clone https://github.com/facebookresearch/baspacho.git
cd baspacho
# set-up; this does NOT use CUDA because the mac doesn't have CUDA
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DBASPACHO_USE_CUBLAS=0
cmake --build build -- -j16 && ctest --test-dir build

git clone https://github.com/facebookresearch/theseus.git && cd theseus BASPACHO_ROOT_DIR=baspacho/ pip install -e .

pip install --no-deps git+https://github.com/matejak/imreg_dft.git
