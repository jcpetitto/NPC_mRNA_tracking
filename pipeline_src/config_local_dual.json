{
    "pipeline foreman": {
        "pipe globals": ["pipe globals"],
        "image processor": ["pipe globals", "image processor"],
        "particle detection": ["pipe globals", "particle detection"],
        "pipeline_mode": "dual_label"
    },
    "pipe globals": {
        "strains": ["BMY9999"],
        "directories": {
            "imaging root": "example_data/",
            "experiment subdirectory": "dual_strain_label/",
            "output root": "local_yeast_output/dual_label/",
            "model root": "example_data/trained_networks/"
        },
        "roisize": 16,
        "pixelsize": 128,
        "frame_duration": 0.02,
        "FoV_prefix": "FoV_",
        "FoV_num_digits": 4
    },
    "image processor": {
        "model_NE": "Modelweights_NE_segmentation.pt",
        "model_bg": "model_wieghts_background_psf.pth",
        "ne_dual_label": true,
        "registration": {
            "output subdirectory": "registration/",
            "frame_range": [0, 250],
            "frames_per_average": 25,
            "padding": 5,
            "drift_bins": 4,
            "max_reg_diff": 0.50,
            "upsample_factor": 1000,
            "upscale_factor": 1
        },
        "responsivity": {
            "input subdirectory": "Calibration_Data/",
            "output subdirectory": "responsivity/",
            "ch1": {
                        "bright": "red_gain300.tif",
                        "dark": "red_dark300.tif"
                    },
            "ch2": {
                        "bright": "bright_images_green_channel_20ms_300EM.tiff",
                        "dark": "dark_images_green_channel_20ms_300EM.tiff"
                    },
            "frame_range": [
                0,
                250
            ]
        },
        "dual_label": {
            "output subdirectory": "distances/",
            "channel1":"fn_track_ch1",
            "channel2":"fn_track_ch2",
            "min_iou": 0.9,
            "N_dist_calc": 200
        },
        "ne_fit": {
            "frame_range": [0, 250],
            "bbox_dim": {"width": 75, "height": 75},
            "line_length": 12,
            "n_samples_along_normal": 100,
            "run_bezier_bridging": true,
            "bridge_smoothing_factor": 1.0,
            "bridge_min_gap_pixels": 1.0,
            "max_curvature_angle_deg": 1.0,
            "initial": {
                "output subdirectory": "initial_fit/",
                "plot_test_imgs": true,
                "use_merged_clusters": true,
                "max_merge_dist": 10,
                "masking_threshold": 0.5,
                "bspline_smoothing": 1.6,
                "qc_min_labeled": 75,
                "init_sampling_density": 10
            },
            "refinement": {
                "output subdirectory": "refined_fit/",
                "plot_refine_test_imgs": false,
                "final_sampling_density": 64,
                "normal_lines_n": 1000,
                "prep_for_opt": true,
                "noise_multiplier": 0.005,
                "default_model": "richards_gaussian",
                "model_list": [
                    {
                        "name": "richards_gaussian",
                        "parameters": 11,
                        "initial_guess": [0.4, 1, 1, 0.5, 0.35, 0, 0]
                    },
                    {
                        "name": "gaussian_linear",
                        "parameters": 5,
                        "initial_guess": [0, 0, 0, 0, 0]
                    }
                ],
                "lm_optimizer": {
                    "step_radius": 1.0,
                    "step_size": 0.1,
                    "iterations": 50
                }
            }
        }
    },
    "particle detection": {
        "glrt_multichannel": {
            "frame_range_particle":[0, 1000],
            "time_points_per_roi": 20,
            "spatial_batch_size": 8000,
            "frame_batch_size": 100,
            "roi_size": 16,
            "final_roi_size": 10,
            "tolerance_intensity": 1e-3,
            "tolerance_background": 1e-3,
            "sigma": 0.92,
            "model_bg": "model_wieghts_background_psf.pth",
            "lmlambda": 100,
            "number_channel": 20,
            "iterations": 100,
            "alpha":0.05,
            "batch_size" : 160000,
            "full_image" : false
        }
    }
}